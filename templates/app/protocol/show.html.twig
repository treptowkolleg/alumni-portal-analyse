{% extends('base.html.twig') %}

{% block body %}
    <div class="py-3 d-flex justify-content-between align-items-center">

        <form>
            <label for="name" class="visually-hidden sr-only">Name filtern</label>
            <input type="hidden" name="controller" value="app">
            <input type="hidden" name="view" value="index">
            <input type="search" class="form-control" name="name" id="name" value="{{ filtered_name ?? '' }}" placeholder="Name filtern">
        </form>
    </div>

    {{ include('component/main_tab.html.twig',{'active':'protocol'}) }}

    <div class="container-fluid g-5 py-5">
        <div class="row">
            <div class="col-12 col-md-3">

                <div class="card mb-3">
                    <div class="card-header">
                        <div class="h4 mb-0">Teilnehmende</div>
                    </div>
                    <div class="list-group list-group-flush">
                        <div class="list-group-item py-3">
                            <div class="row">
                                <div class="col-12"><div class="fs-4 fw-bold mb-2 pb-2 border-bottom">Ben</div></div>
                                <div class="col-4"><span class="fw-bolder">Stimmung</span></div><div class="col-8">krank</div>
                                <div class="col-4"><span class="fw-bolder">Mikrofon</span></div><div class="col-8">MXL 990</div>
                                <div class="col-4"><span class="fw-bolder">Ort</span></div><div class="col-8">Büro</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mb-3 w-100">
                    <audio controls class="w-100">
                        <source src="/audio/{{ protocol.file }}" type="audio/mpeg">
                        Dein Browser unterstützt das Audio-Element nicht.
                    </audio>
                </div>

                <div class="mb-3">
                    <img src="/assets/img/{{ protocol.file }}.png" alt="Waveform von {{ protocol.title|default('Waveform') }}" class="img-fluid img-thumbnail">
                </div>

                <div class="mb-3">
                    <img src="/assets/img/{{ protocol.cluster_file }}.png" alt="Cluster von {{ protocol.title|default('Waveform') }}" class="img-fluid img-thumbnail">
                </div>

                <div class="card mb-3">
                    <div class="card-header">
                        <div class="h4 mb-0">Metadaten</div>
                    </div>
                    <div class="list-group list-group-flush">
                        <div  class="list-group-item">
                            <div class="row">
                                <div class="col-4"><span class="fw-bolder">Audiolänge</span></div><div class="col-8">{{ protocol.audio_length|round(2, 'floor') }}s</div>
                            </div>
                        </div>
                        <div  class="list-group-item">
                            <div class="row">
                                <div class="col-4"><span class="fw-bolder">Whisper-Modell</span></div><div class="col-8">{{ protocol.whisper_model }}</div>
                                <div class="col-4"><span class="fw-bolder">Prozessdauer</span></div><div class="col-8">{{ protocol.whisper_duration|round(2, 'floor') }}s</div>
                            </div>
                        </div>
                        <div  class="list-group-item">
                            <div class="row">
                                <div class="col-4"><span class="fw-bolder">LLM-Modell</span></div><div class="col-8">{{ protocol.llm_model }}</div>
                                <div class="col-4"><span class="fw-bolder">Prozessdauer</span></div><div class="col-8">{{ protocol.llm_duration|round(2, 'floor') }}s</div>
                            </div>
                        </div>
                        <div  class="list-group-item">
                            <div class="row">
                                <div class="col-4"><span class="fw-bolder">Verwendetes System</span></div><div class="col-8">{{ protocol.device|upper }}</div>
                                <div class="col-4"><span class="fw-bolder">Grafikkarte</span></div><div class="col-8">{{ protocol.gpu|default('-') }}</div>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
            <div class="col-12 col-md-9">
                <div class="row-cols-1 g-3 sticky-top" style="top: 50px">
                    <div class="col mb-5"><h1 class="">{{ protocol.title }}</h1><div>{{ protocol.timestamp|date('d.m.Y - H:i') }} Uhr</div></div>
                    <div class="col">{{ protocol.summary|raw }}</div>
                    <div class="col"><h2>Transkript</h2><pre><code>{{ protocol.transcript }}</code></pre></div>
                    <div class="col"><h2>Think</h2><pre><code>{{ protocol.think|default('Model verwendet kein Think.') }}</code></pre></div>
                </div>
            </div>
        </div>


    </div>

{% endblock %}